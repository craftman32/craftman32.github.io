<html>
<head>
	<title>Sobriety Test</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<link href="favicon.ico" rel="icon" type="image/x-icon" />
</head>
<body>
		<a href="../index.html">back</a>
		<center>
			<p>Click "Start" to start the game. Snoop will appear on the screen. Click on Snoop 10 times to determine your rank!</p>
			<button id="start" onClick="startTimer()">Start</button>
			<h1>Timer:<span id="timer"></span></h1>
			<h1>Clicks:<span id="clicks"></span></h1>
			<h1 id="rankArea" style="display:none">Your Rank: </h1><span id="rank"></span>
		</center>
		<img id="snoop" src="snoop-dogg.jpg" height="50px" width="70px" style="display:none">
		<img id="munchies" src="http://www.modernreaders.com/wp-content/uploads/2015/02/munchies1.jpg" height="100px" width="140px" style="display:none">
	<script>
		function startTimer(){
			$("#start").hide();
			$("#snoop").fadeToggle(1000);
			var clickCount = 0;
			var timeInMs = 0;
			var theTimer = setInterval(function(){myTimer()},1);
		      function myTimer() {
		         timeInMs ++;
		          document.getElementById('timer').innerHTML = timeInMs;
		      }
		    $( "#snoop" ).click(function( event ) {
		 		var audioElement = document.createElement('audio');
		        audioElement.setAttribute('src', 'smoke.mp3');
		        audioElement.setAttribute('autoplay', 'autoplay');
		        //audioElement.load()

		        audioElement.addEventListener("load", function() {
		            audioElement.play();
		        }, true);

		        $( "#snoop" ).fadeToggle( 2000, function(){
		        		clickCount ++;
		        		document.getElementById('clicks').innerHTML = clickCount;
		        		if(clickCount == 10){
		        			clearInterval(theTimer);
		        			$("#rankArea").fadeToggle(1000);
		        			if(timeInMs < 8000){
		        				document.getElementById('rank').innerHTML = 'Completely sober';
		        			} else if(timeInMs >= 8000 && timeInMs < 10000) {
		        				document.getElementById('rank').innerHTML = 'A little buzzed';
		        			} else if(timeInMs >= 10000 && timeInMs < 12000) {
		        				document.getElementById('rank').innerHTML = 'Pleasantly high';
		        			} else if(timeInMs >= 12000) {
		        				document.getElementById('rank').innerHTML = '<img src="baked.gif" />';
		        				var lightSpeed = new Audio('lightspeed.mp3');
        						lightSpeed.play();
		        			}
		        			return;
		        		}
		        		var topNumber = 1 + Math.floor(Math.random() * 600);
		        		var leftNumber = 1 + Math.floor(Math.random() * 1200);
		        		$( "#snoop" ).fadeToggle();
		        		$( "#snoop" ).css({top: topNumber, left: leftNumber, position:'absolute'});
		        		topNumber = 1 + Math.floor(Math.random() * 600);
		        		leftNumber = 1 + Math.floor(Math.random() * 1200);
		        		$( "#munchies" ).fadeIn();
		        		$( "#munchies" ).css({top: topNumber, left: leftNumber, position:'absolute'});
		        } );
			});
			$( "#munchies" ).click(function( event ) {
				clearInterval(theTimer);
		        $("#rankArea").fadeToggle(1000);
		        $( "#snoop" ).fadeOut();
		        $( "#munchies" ).fadeOut();
		        document.getElementById('rank').innerHTML = '<img src="baked.gif" />';
		        var lightSpeed = new Audio('lightspeed.mp3');
        		lightSpeed.play();
			});
		}
	</script> 
</body>
</html>